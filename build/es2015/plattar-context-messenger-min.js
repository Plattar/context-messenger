"use strict";function _createForOfIteratorHelper(o,allowArrayLike){var it;if(typeof Symbol==="undefined"||o[Symbol.iterator]==null){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var normalCompletion=true,didErr=false,err;return{s:function s(){it=o[Symbol.iterator]()},n:function n(){var step=it.next();normalCompletion=step.done;return step},e:function e(_e2){didErr=true;err=_e2},f:function f(){try{if(!normalCompletion&&it["return"]!=null)it["return"]()}finally{if(didErr)throw err}}}}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor)){throw new TypeError("Cannot call a class as a function")}}function _defineProperties(target,props){for(var i=0;i<props.length;i++){var descriptor=props[i];descriptor.enumerable=descriptor.enumerable||false;descriptor.configurable=true;if("value"in descriptor)descriptor.writable=true;Object.defineProperty(target,descriptor.key,descriptor)}}function _createClass(Constructor,protoProps,staticProps){if(protoProps)_defineProperties(Constructor.prototype,protoProps);if(staticProps)_defineProperties(Constructor,staticProps);return Constructor}function _typeof(obj){"@babel/helpers - typeof";if(typeof Symbol==="function"&&typeof Symbol.iterator==="symbol"){_typeof=function _typeof(obj){return typeof obj}}else{_typeof=function _typeof(obj){return obj&&typeof Symbol==="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj}}return _typeof(obj)}(function(f){if((typeof exports==="undefined"?"undefined":_typeof(exports))==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.Plattar=f()}})(function(){var define,module,exports;return function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++){o(t[i])}return o}return r}()({1:[function(require,module,exports){"use strict";var memory=require("./memory/memory.js");var messenger=require("./messenger/messenger.js");module.exports={memory:memory,messenger:messenger}},{"./memory/memory.js":2,"./messenger/messenger.js":7}],2:[function(require,module,exports){var PermanentMemory=require("./permanent-memory");var TemporaryMemory=require("./temporary-memory");var Memory=function(){function Memory(){_classCallCheck(this,Memory);this._tempMemory=new TemporaryMemory;this._permMemory=new PermanentMemory}_createClass(Memory,[{key:"temp",get:function get(){return this._tempMemory}},{key:"perm",get:function get(){return this._permMemory}}]);return Memory}();module.exports=new Memory},{"./permanent-memory":3,"./temporary-memory":4}],3:[function(require,module,exports){var WrappedValue=require("./wrapped-value");var PermanentMemory=function PermanentMemory(){_classCallCheck(this,PermanentMemory);return new Proxy({},{get:function get(target,prop,receiver){if(prop==="watch"){return function(variable,callback){if(!target[variable]){target[variable]=new WrappedValue(variable,true)}target[variable].watch=callback}}if(prop==="clear"){return function(){var _iterator=_createForOfIteratorHelper(Object.getOwnPropertyNames(target)),_step;try{for(_iterator.s();!(_step=_iterator.n()).done;){var pitem=_step.value;delete target[pitem];localStorage.removeItem(pitem)}}catch(err){_iterator.e(err)}finally{_iterator.f()}}}if(prop==="purge"){return function(){localStorage.clear();var _iterator2=_createForOfIteratorHelper(Object.getOwnPropertyNames(target)),_step2;try{for(_iterator2.s();!(_step2=_iterator2.n()).done;){var _prop=_step2.value;delete target[_prop]}}catch(err){_iterator2.e(err)}finally{_iterator2.f()}}}if(!target[prop]){target[prop]=new WrappedValue(prop,true)}return target[prop].value},set:function set(target,prop,value){if(!target[prop]){target[prop]=new WrappedValue(prop,true)}target[prop].value=value;return true}})};module.exports=PermanentMemory},{"./wrapped-value":5}],4:[function(require,module,exports){var WrappedValue=require("./wrapped-value");var TemporaryMemory=function TemporaryMemory(){_classCallCheck(this,TemporaryMemory);return new Proxy({},{get:function get(target,prop,receiver){if(prop==="watch"){return function(variable,callback){if(!target[variable]){target[variable]=new WrappedValue(variable,false)}target[variable].watch=callback}}if(prop==="clear"||prop==="purge"){return function(){var _iterator3=_createForOfIteratorHelper(Object.getOwnPropertyNames(target)),_step3;try{for(_iterator3.s();!(_step3=_iterator3.n()).done;){var _prop2=_step3.value;delete target[_prop2]}}catch(err){_iterator3.e(err)}finally{_iterator3.f()}}}if(!target[prop]){target[prop]=new WrappedValue(prop,false)}return target[prop].value},set:function set(target,prop,value){if(!target[prop]){target[prop]=new WrappedValue(prop,false)}target[prop].value=value;return true}})};module.exports=TemporaryMemory},{"./wrapped-value":5}],5:[function(require,module,exports){var WrappedValue=function(){function WrappedValue(varName,isPermanent){_classCallCheck(this,WrappedValue);this._value=undefined;this._callback=undefined;this._isPermanent=isPermanent;this._varName=varName;if(this._isPermanent){this._value=JSON.parse(localStorage.getItem(this._varName))}}_createClass(WrappedValue,[{key:"value",get:function get(){if(this._isPermanent&&this._value==undefined){this._value=JSON.parse(localStorage.getItem(this._varName))}return this._value},set:function set(newValue){if(typeof newValue==="function"){throw new TypeError("WrappedValue.value cannot be set to a function type")}var oldValue=this._value;this._value=newValue;if(this._isPermanent){localStorage.setItem(this._varName,JSON.stringify(this._value))}if(this._callback&&oldValue!==newValue){this._callback(oldValue,this._value)}}},{key:"watch",set:function set(newValue){if(typeof newValue==="function"){if(newValue.length==2){this._callback=newValue}else{throw new RangeError("WrappedValue.watch callback must accept exactly 2 variables. Try using WrappedValue.watch = (oldVal, newVal) => {}")}}else{throw new TypeError("WrappedValue.watch must be a type of function. Try using WrappedValue.watch = (oldVal, newVal) => {}")}}}]);return WrappedValue}();module.exports=WrappedValue},{}],6:[function(require,module,exports){var WrappedFunction=require("./wrapped-function");var CurrentFunctions=function CurrentFunctions(){_classCallCheck(this,CurrentFunctions);return new Proxy({},{get:function get(target,prop,receiver){if(prop==="watch"){return function(variable,callback){if(!target[variable]){target[variable]=new WrappedFunction(variable)}target[variable].watch=callback}}if(prop==="clear"||prop==="purge"){return function(){var _iterator4=_createForOfIteratorHelper(Object.getOwnPropertyNames(target)),_step4;try{for(_iterator4.s();!(_step4=_iterator4.n()).done;){var pitem=_step4.value;delete target[pitem]}}catch(err){_iterator4.e(err)}finally{_iterator4.f()}}}if(!target[prop]){target[prop]=new WrappedFunction(prop)}return function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++){args[_key]=arguments[_key]}return target[prop].exec(args)}},set:function set(target,prop,value){if(!target[prop]){target[prop]=new WrappedFunction(prop)}target[prop].value=value;return true}})};module.exports=CurrentFunctions},{"./wrapped-function":8}],7:[function(require,module,exports){var CurrentFunctions=require("./current-functions");var Messenger=function(){function Messenger(){_classCallCheck(this,Messenger);this._parentStack=window.parent?window.parent:undefined;this._childStack=undefined;this._currentFunctions=new CurrentFunctions}_createClass(Messenger,[{key:"parent",get:function get(){},set:function set(value){if(!value){throw new TypeError("Messenger.parent cannot be undefined")}if(typeof value.postMessage==="function"){throw new TypeError("Messenger.parent must have a .postMessage() function definition")}this._parentStack=value}},{key:"current",get:function get(){return this._currentFunctions}},{key:"child",get:function get(){},set:function set(value){if(!value){throw new TypeError("Messenger.child cannot be undefined")}if(typeof value.postMessage==="function"){throw new TypeError("Messenger.child must have a .postMessage() function definition")}this._childStack=value}}]);return Messenger}();module.exports=new Messenger},{"./current-functions":6}],8:[function(require,module,exports){var WrappedFunction=function(){function WrappedFunction(funcName){_classCallCheck(this,WrappedFunction);this._value=undefined;this._callback=undefined;this._funcName=funcName}_createClass(WrappedFunction,[{key:"_execute",value:function _execute(){for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++){args[_key2]=arguments[_key2]}var rData=this._value(args);if(this._callback){this._callback(rData,args)}return rData}},{key:"exec",value:function exec(){var _this=this;for(var _len3=arguments.length,args=new Array(_len3),_key3=0;_key3<_len3;_key3++){args[_key3]=arguments[_key3]}return new Promise(function(accept,reject){if(!_this._value){return reject(new Error("Function with name "+_this._funcName+"() is not defined"))}try{return accept(_this._execute(args))}catch(e){return reject(e)}})}},{key:"value",set:function set(newValue){if(typeof newValue!=="function"){throw new TypeError("WrappedFunction.value must be a function. To store values use Plattar.memory")}this._value=newValue}},{key:"watch",set:function set(newValue){if(typeof newValue==="function"){this._callback=newValue}else{throw new TypeError("WrappedFunction.watch must be a type of function. Try using WrappedFunction.watch = (rData, ...args) => {}")}}}]);return WrappedFunction}();module.exports=WrappedFunction},{}]},{},[1])(1)});