<!DOCTYPE html>
<html>

<head>
    <title>Function Test</title>
    <script type='text/javascript' src='../../build/es2019/plattar-context-messenger.js'></script>
</head>

<body>
    <p>This is a deep page</p>

    <textarea id="memory_area" rows="10" cols="50" oninput="save()"></textarea>

    <script>
        function save() {
            var text = document.getElementById("memory_area").value;

            Plattar.memory.perm.text_value = text;
        }

        Plattar.memory.perm.watch("text_value", (oldVal, newVal) => {
            document.getElementById("memory_area").value = newVal;
        });

        document.getElementById("memory_area").value = Plattar.memory.perm.text_value;
    </script>
</body>

</html>