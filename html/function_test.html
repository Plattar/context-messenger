<!DOCTYPE html>
<html>

<head>
    <title>Function Test</title>
    <script type='text/javascript' src='../build/es2019/plattar-context-messenger.js'></script>
</head>

<body>
    <p>This is the Main Frame</p>
    <iframe id="plattar_frame_1" src="./function_test_nested.html" title="nested iframe 1"></iframe>
    <iframe id="plattar_frame_2" src="./function_test_nested.html" title="nested iframe 2"></iframe>
    <iframe id="plattar_frame_3" src="./function_test_nested.html" title="nested iframe 1"></iframe>
    <iframe id="plattar_frame_4" src="./function_test_nested.html" title="nested iframe 1"></iframe>

    <script type='text/javascript'>
        Plattar.messenger.onload("plattar_frame_1", () => {
            console.log("loaded plattar_frame_1");

            Plattar.messenger.plattar_frame_1.child_add_fnc(1, 2).then((res) => {
                console.log("plattar_frame_1 adding 1, 2 and result is " + res);
            }).catch((err) => {
                console.error(err);
            });
        });

        Plattar.messenger.onload("plattar_frame_2", () => {
            console.log("loaded plattar_frame_2");
        });

        Plattar.messenger.onload("plattar_frame_3", () => {
            console.log("loaded plattar_frame_3");
        });

        Plattar.messenger.onload("plattar_frame_4", () => {
            console.log("loaded plattar_frame_4");
        });
    </script>
</body>

</html>